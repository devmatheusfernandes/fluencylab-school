O plano a seguir detalha a implementação da persistência de dados de gamificação (XP, Ofensiva e Heatmap) que atualmente não estão sendo salvos no banco de dados.

## Implementação de Salvamento de XP e Gamificação

### 1. Objetivo
Garantir que o progresso de gamificação do aluno seja persistido no Firestore sempre que uma sessão de prática for concluída.

### 2. Arquivos Afetados
- [`actions/srsActions.ts`](file:///c:/Users/Mathe/OneDrive/Documentos/Projetos%20de%20Programação/Em%20progresso/fluencylab-school/actions/srsActions.ts)

### 3. Detalhes da Implementação

#### A. Importações
Adicionar tipos e utilitários necessários:
```typescript
import { format } from "date-fns";
import { User } from "@/types/users/users";
```

#### B. Lógica de Atualização (em `processPracticeResults`)
Dentro da transação existente no banco de dados, iremos adicionar os seguintes passos após a atualização do plano de estudos:

1.  **Recuperar Usuário**: Buscar o documento do aluno na coleção `users` usando `planData.studentId`.
2.  **Inicialização Segura**: Garantir que o objeto `gamification` exista, criando valores padrão se necessário.
3.  **Cálculo de XP**:
    - Iterar sobre os resultados da prática.
    - Conceder **10 XP** para cada resposta correta (nota >= 3).
    - Atualizar `currentXP`.
4.  **Gestão de Ofensiva (Streak)**:
    - Comparar a data de hoje com `lastStudyDate`.
    - **Consecutivo (Diferença de 1 dia):** Incrementa a ofensiva atual.
    - **Mesmo dia (Diferença de 0 dias):** Mantém a ofensiva (não incrementa duplicado).
    - **Quebra (Diferença > 1 dia):** Reseta a ofensiva para 1.
    - Atualizar `streak.best` se a atual superar a melhor marca.
5.  **Mapa de Calor (Heatmap)**:
    - Registrar a atividade do dia atual no objeto `studyHeatmap` (formato "YYYY-MM-DD").

### 4. Resultado Esperado
Ao finalizar uma prática, o usuário verá seus pontos de XP, dias de ofensiva e histórico de atividades atualizados corretamente no perfil e dashboard, persistindo entre sessões.