# Implement "Roadmap" Tab with AI Generation

I will implement a new "Roadmap" tab in the Student Profile that allows generating a comprehensive 6-12 month lesson plan using Gemini 1.5 Pro.

## 1. Type Definitions
**File:** `types/students/studentProfile.ts`
- Define the `Roadmap` interface matching the requested structure (Objectives, Structure, Lessons, Methodology, etc.).
- Add `roadmap?: Roadmap` field to `StudentProfile` interface.

## 2. Backend: AI Generation Service
**File:** `actions/generateRoadmap.ts` (New)
- Create a Server Action `generateRoadmapAction(profileId: string)`.
- Use `gemini-1.5-pro` model for large context capability.
- Construct a robust system prompt that takes the `generatedPromptPlan` and outputs strict JSON.
- Save the result to `student-profiles/{id}` in the `roadmap` field.
- Update `onboardingStatus.roadmapCreated` to `true`.

## 3. Frontend Components
**File:** `components/manager/RoadmapTab.tsx` (New)
- **State 1: No Roadmap**: Show a "Generate Roadmap" button with a loading state (handling the potentially long generation time).
- **State 2: Roadmap Exists**:
  - Display "Objectives" and "Structure" summaries.
  - Render a list/grid of Lesson Cards (Aula 1, Aula 2, etc.).
  - Implement an "Edit" feature (Modal or inline) to modify lesson details.
  - Allow manual "Regenerate" or "Update" of the roadmap data.

**File:** `components/manager/StudentProfileTabs.tsx`
- Add `profile` prop to the component.
- Add the "Roadmap" tab conditionally: only visible if `profile.generatedPromptPlan` exists.

**File:** `components/manager/IntegrationProgress.tsx`
- Update the `roadmap_created` step to check `profile.onboardingStatus?.roadmapCreated` or `!!profile.roadmap`.

## 4. Page Integration
**File:** `app/[locale]/hub/manager/student-profiles/[id]/page.tsx`
- Pass the full `profile` object to `<StudentProfileTabs />` so it can access the roadmap data.

## 5. User Experience
- The roadmap will be presented as a sequence of cards for easy readability.
- Managers can edit any part of the generated plan if the AI output needs adjustment.
