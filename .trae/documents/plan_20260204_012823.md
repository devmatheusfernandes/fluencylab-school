I have refined the plan to strictly follow your project's architecture (Repositories, Services, Actions, separated Backend/Frontend) and security rules.

## 1. Data Layer & Business Logic (Backend)
- **Types**: Create `types/learning/immersion.ts` for `Podcast`, `Blog`, and `UserPodcastProgress` interfaces.
- **Repository**: Create `repositories/learning/immersionRepository.ts` using `firebase-admin` for direct Firestore access.
- **Service**: Create `services/learning/immersionService.ts` to encapsulate business logic (CRUD, progress tracking).
- **Security Rules**:
  - Update `firebase/firestore.rules`: Add rules for `podcasts` and `blogs` (read: auth, write: material_manager) and `userPodcastProgress` (owner access).
  - Update `firebase/storage.rules`: Add rules for `immersion/podcasts/{file}` and `immersion/blogs/{file}`.

## 2. Server Actions (Frontend <-> Backend Bridge)
- **Actions**: Create `actions/learning/immersionActions.ts`.
  - `createPodcast`, `updatePodcast`, `deletePodcast`
  - `createBlog`, `updateBlog`, `deleteBlog`
  - `savePodcastProgress`
  - All actions will validate input and call `immersionService`.

## 3. API Routes (File Uploads)
- **Podcast Audio**: `app/api/uploads/immersion/podcast/route.ts` (Streaming upload to Storage).
- **Blog Cover**: `app/api/uploads/immersion/blog-cover/route.ts`.

## 4. Frontend Hooks & State
- **Data Hooks**: `hooks/learning/useImmersion.ts` (React Query or SWR wrappers around Server Actions if needed, or simple wrappers).
- **Player Hook**: `hooks/ui/usePodcastPlayer.ts` to handle audio element refs, time updates, and auto-saving progress.

## 5. UI Implementation
- **Material Manager (Admin)**:
  - Location: `app/[locale]/hub/material-manager/immersion`
  - Components: `PodcastForm`, `BlogForm` (using existing `TipTap` component).
- **Student Area**:
  - Location: `app/[locale]/hub/student/my-immersion`
  - **Podcast Player**: Custom component with transcription view, progress slider, and volume control.
  - **Blog Reader**: Read-only view of the content.

## 6. Implementation Steps
1.  **Define Types & Rules** (Base)
2.  **Implement Repository & Service** (Backend Logic)
3.  **Implement Server Actions & API** (Bridge)
4.  **Create UI Pages & Components** (Frontend)
5.  **Verify End-to-End** (Upload -> Save -> View -> Play)
