# Create Firebase Usage Dashboard (Blaze Plan)

Since you are on the **Blaze Plan (Pay as you go)**, monitoring your usage is even more critical to avoid surprise bills. The Cloud Monitoring API is the perfect tool for this because it tracks the exact metrics that Google charges for.

## Core Strategy
We will focus on the "Big 3" cost drivers for Firebase on the Blaze plan:
1.  **Firestore Reads/Writes**: The most common source of costs.
2.  **Storage Bandwidth**: Data downloaded/uploaded.
3.  **Active Connections**: (Optional) For Realtime Database if used.

## Implementation Plan

### 1. Install Dependencies
-   `npm install @google-cloud/monitoring`
-   We will need to ensure your `GOOGLE_APPLICATION_CREDENTIALS` (or Service Account) has the **"Monitoring Viewer"** role.

### 2. Create Service (`services/admin/firebaseUsageService.ts`)
-   Implement `getFirebaseUsage()` using `MetricServiceClient`.
-   **Metrics to Fetch** (aggregated for the current billing month):
    -   `firestore.googleapis.com/document/read_ops_count`
    -   `firestore.googleapis.com/document/write_ops_count`
    -   `firestore.googleapis.com/document/delete_ops_count`
-   **Logic**:
    -   Define `startTime` as the 1st day of the current month.
    -   Sum up the time series data to get a "Month-to-Date" total.

### 3. Create UI Component (`components/admin/FirebaseUsageWidget.tsx`)
-   **Visuals**:
    -   Progress bars showing usage vs. Free Tier limits (even on Blaze, the first 50k reads/day are free, so it's a good baseline).
    -   **Cost Estimator**: A simple calculation: `(Reads - 50k/day) * $0.06/100k`. This gives you an *estimated* cost directly in the dashboard!
    -   **Billing Link**: Direct button to the GCP Billing Console.

### 4. Integration
-   Add the widget to the Admin Dashboard.
-   Update translations (`pt.json` / `en.json`).

This approach gives you **real-time visibility** into your consumption and a **rough cost estimate** based on public pricing, without needing complex BigQuery setups.
