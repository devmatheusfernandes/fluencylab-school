I will implement a safe mechanism to regenerate Prompt Plans without losing the previous ones.

### 1. Data Structure Update

* **File:** `types/students/studentProfile.ts`

* **Change:** Add a `promptHistory` field to the `StudentProfile` interface to store the list of generated prompts.

  ```typescript
  promptHistory?: { content: string; createdAt: string }[];
  ```

### 2. Backend Logic (Server Action)

* **File:** `actions/generatePromptPlan.ts`

* **Change:** Update the saving logic to:

  1. Detect if there is already an old prompt (and if it is not yet in the history).
  2. Add the new prompt to the `promptHistory` array.
  3. Update `generatedPromptPlan` with the new content (so it remains the "current" one displayed).

### 3. Frontend (UI & Warning)

* **File:** `components/students/StudentProfileList.tsx`

* **Change:**

  * Implement a **Warning Modal** that appears when trying to generate a prompt for a profile that already has one.

  * The warning will explain that the previous prompt will be saved in history.

  * Manage the state of this new modal (`warningProfileId`).

### 4. Translations

* **Files:** `messages/pt.json` and `messages/en.json`

* **Change:** Add texts for the warning modal (Title, Description, Confirmation Button).

### 5. Verification

* I will verify if the warning appears for profiles with existing prompts.

* I will verify if the new prompt is generated and the previous one is preserved (I can verify this by checking if the "View Prompt" button still works and shows the new one, and conceptually the data is safe).

